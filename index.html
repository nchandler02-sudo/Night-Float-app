<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Night Float Companion</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700&family=Playfair+Display:wght@600;700;800&display=swap" rel="stylesheet" />
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  html, body, #root { height: 100%; width: 100%; }
  body {
    font-family: 'DM Sans', 'Segoe UI', system-ui, sans-serif;
    background: #0a0e1a;
    color: #e2e8f0;
    -webkit-font-smoothing: antialiased;
  }
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: rgba(148,163,184,0.15); border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: rgba(148,163,184,0.25); }
  input::placeholder { color: #475569; }

  /* Landing */
  .landing { min-height: 100vh; background: linear-gradient(160deg, #0a0e1a 0%, #0f172a 40%, #1a1035 100%); display: flex; flex-direction: column; }
  .landing-bg { position: fixed; inset: 0; z-index: 0; overflow: hidden; pointer-events: none; }
  .landing-bg .orb1 { position: absolute; top: -20%; left: -10%; width: 50%; height: 50%; background: radial-gradient(ellipse, rgba(99,102,241,0.08) 0%, transparent 70%); filter: blur(60px); }
  .landing-bg .orb2 { position: absolute; bottom: -10%; right: -10%; width: 40%; height: 40%; background: radial-gradient(ellipse, rgba(168,85,247,0.06) 0%, transparent 70%); filter: blur(60px); }
  .landing-inner { position: relative; z-index: 1; max-width: 900px; margin: 0 auto; padding: 60px 24px 40px; width: 100%; }

  .badge { display: inline-flex; align-items: center; gap: 10px; background: rgba(99,102,241,0.1); border: 1px solid rgba(99,102,241,0.2); border-radius: 100px; padding: 6px 18px; margin-bottom: 24px; font-size: 12px; font-weight: 600; letter-spacing: 1.5px; text-transform: uppercase; color: #a5b4fc; }
  .hero-title { font-family: 'Playfair Display', Georgia, serif; font-size: clamp(32px, 5vw, 52px); font-weight: 800; line-height: 1.15; margin: 0 0 16px; background: linear-gradient(135deg, #e2e8f0 0%, #c7d2fe 50%, #a78bfa 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
  .hero-sub { color: #94a3b8; font-size: 17px; line-height: 1.6; max-width: 520px; margin: 0 auto; }

  .search-box { position: relative; max-width: 480px; margin: 0 auto 40px; }
  .search-icon { position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #64748b; font-size: 16px; pointer-events: none; }
  .search-input { width: 100%; padding: 14px 16px 14px 44px; border-radius: 14px; border: 1px solid rgba(148,163,184,0.15); background: rgba(15,23,42,0.6); backdrop-filter: blur(12px); color: #e2e8f0; font-size: 15px; outline: none; font-family: inherit; transition: border-color 0.2s; }
  .search-input:focus { border-color: rgba(99,102,241,0.5); }

  .topic-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 16px; }
  .topic-card { background: rgba(15,23,42,0.6); backdrop-filter: blur(16px); border: 1px solid rgba(148,163,184,0.1); border-radius: 18px; padding: 28px 24px; cursor: pointer; transition: all 0.25s ease; position: relative; overflow: hidden; }
  .topic-card:hover { transform: translateY(-3px); }
  .topic-card .accent-bar { position: absolute; top: 0; left: 0; right: 0; height: 3px; opacity: 0.7; }
  .topic-card .card-icon { width: 44px; height: 44px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 20px; margin-bottom: 16px; }
  .topic-card h3 { margin: 0 0 10px; font-size: 16px; font-weight: 700; color: #f1f5f9; line-height: 1.35; }
  .topic-card .meta { display: flex; align-items: center; gap: 12px; font-size: 12px; color: #64748b; }

  /* Detail View */
  .detail-view { height: 100vh; background: linear-gradient(160deg, #0a0e1a 0%, #0f172a 40%, #1a1035 100%); display: flex; flex-direction: column; overflow: hidden; }
  .top-bar { height: 56px; display: flex; align-items: center; padding: 0 20px; border-bottom: 1px solid rgba(148,163,184,0.08); background: rgba(10,14,26,0.8); backdrop-filter: blur(16px); flex-shrink: 0; gap: 12px; z-index: 20; }
  .back-btn { display: flex; align-items: center; gap: 6px; background: none; border: none; color: #94a3b8; cursor: pointer; font-size: 14px; padding: 6px 10px; border-radius: 8px; font-family: inherit; font-weight: 500; transition: background 0.15s; }
  .back-btn:hover { background: rgba(100,116,139,0.1); }
  .top-bar h2 { margin: 0; font-size: 15px; font-weight: 700; color: #f1f5f9; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; flex: 1; min-width: 0; }

  .body-wrap { display: flex; flex: 1; overflow: hidden; position: relative; }

  .sidebar { width: 240px; flex-shrink: 0; border-right: 1px solid rgba(148,163,184,0.08); background: rgba(10,14,26,0.5); overflow-y: auto; padding: 16px 10px; }
  .sidebar-label { font-size: 10px; text-transform: uppercase; letter-spacing: 2px; color: #475569; font-weight: 700; padding: 4px 12px; margin-bottom: 8px; }
  .sidebar-btn { display: flex; align-items: center; gap: 10px; width: 100%; text-align: left; padding: 10px 12px; border-radius: 10px; border: none; background: transparent; color: #94a3b8; cursor: pointer; font-size: 13px; font-weight: 400; font-family: inherit; margin-bottom: 2px; transition: all 0.15s ease; position: relative; }
  .sidebar-btn:hover { background: rgba(100,116,139,0.08); }
  .sidebar-btn.active { font-weight: 600; color: #f1f5f9; }
  .sidebar-btn .indicator { position: absolute; left: 0; top: 50%; transform: translateY(-50%); width: 3px; height: 20px; border-radius: 0 3px 3px 0; }

  .main-content { flex: 1; overflow-y: auto; padding: 32px; }
  .main-inner { max-width: 780px; margin: 0 auto; }

  .section-header { margin-bottom: 28px; }
  .section-header .row { display: flex; align-items: center; gap: 12px; margin-bottom: 8px; }
  .section-header .icon { font-size: 28px; filter: drop-shadow(0 2px 8px rgba(0,0,0,0.3)); }
  .section-header h2 { margin: 0; font-family: 'Playfair Display', Georgia, serif; font-size: clamp(22px, 3vw, 30px); font-weight: 700; color: #f8fafc; }
  .section-header .bar { height: 2px; border-radius: 2px; margin-top: 12px; }

  .content-area { font-size: 15px; line-height: 1.6; color: #cbd5e1; }
  .content-area ul { margin: 0 0 8px; padding: 0 0 0 6px; list-style: none; }
  .content-area li { margin-bottom: 10px; line-height: 1.55; position: relative; padding-left: 18px; }
  .content-area li .dot { position: absolute; left: 0; top: 7px; width: 6px; height: 6px; border-radius: 50%; background: #475569; }
  .content-area p { margin: 0 0 10px; line-height: 1.55; }

  .order-badge { background: rgba(46,204,64,0.12); border: 1px solid rgba(46,204,64,0.25); border-radius: 4px; padding: 1px 6px; font-weight: 600; font-size: 0.92em; color: #4ade80; }

  /* Quiz */
  .quiz-card { background: rgba(15,23,42,0.6); border-radius: 16px; padding: 24px; margin-bottom: 20px; border: 1px solid rgba(148,163,184,0.12); backdrop-filter: blur(12px); }
  .quiz-num { background: linear-gradient(135deg, #7c3aed, #a855f7); border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 700; color: #fff; flex-shrink: 0; }
  .quiz-label { font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px; color: #a78bfa; font-weight: 600; }
  .quiz-stem { line-height: 1.65; color: #e2e8f0; margin-bottom: 20px; font-size: 15px; }
  .quiz-choice { display: flex; align-items: flex-start; gap: 12px; padding: 12px 16px; border-radius: 12px; cursor: pointer; transition: all 0.2s ease; margin-bottom: 8px; }
  .quiz-choice .letter { font-weight: 700; font-size: 14px; min-width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
  .quiz-choice .text { font-size: 14px; line-height: 1.5; }
  .reveal-btn { padding: 10px 24px; border-radius: 10px; border: none; font-weight: 600; font-size: 14px; cursor: pointer; font-family: inherit; transition: all 0.2s ease; }
  .reveal-btn.active { background: linear-gradient(135deg, #7c3aed, #6d28d9); color: #fff; }
  .reveal-btn.disabled { background: rgba(100,116,139,0.2); color: #64748b; cursor: not-allowed; }
  .reset-btn { padding: 10px 24px; border-radius: 10px; border: 1px solid rgba(148,163,184,0.2); background: transparent; color: #94a3b8; font-weight: 600; font-size: 14px; cursor: pointer; font-family: inherit; }
  .explanation { margin-top: 16px; padding: 16px; border-radius: 12px; }
  .explanation .tag { font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
  .explanation p { color: #cbd5e1; line-height: 1.6; font-size: 14px; margin: 0; }

  .micro-label { font-size: 12px; text-transform: uppercase; letter-spacing: 1.5px; color: #a78bfa; font-weight: 700; margin-bottom: 14px; display: flex; align-items: center; gap: 8px; }
  .micro-item { padding: 14px 16px; border-radius: 10px; border: 1px solid rgba(148,163,184,0.1); margin-bottom: 8px; cursor: pointer; transition: all 0.2s ease; display: flex; align-items: flex-start; gap: 10px; }
  .micro-item .arrow { color: #a78bfa; font-weight: 700; font-size: 14px; flex-shrink: 0; margin-top: 1px; }
  .micro-item .q { color: #e2e8f0; font-size: 14px; line-height: 1.5; }

  /* Nav buttons */
  .nav-footer { display: flex; justify-content: space-between; margin-top: 48px; padding-top: 24px; border-top: 1px solid rgba(148,163,184,0.08); }
  .nav-btn { display: flex; align-items: center; gap: 8px; background: rgba(30,41,59,0.5); border: 1px solid rgba(148,163,184,0.12); border-radius: 10px; padding: 10px 18px; color: #94a3b8; font-size: 13px; font-weight: 500; cursor: pointer; font-family: inherit; transition: all 0.15s; }
  .nav-btn:hover { border-color: rgba(148,163,184,0.3); }

  /* Mobile toggle */
  .mobile-toggle { display: none; background: rgba(100,116,139,0.15); border: none; color: #94a3b8; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 14px; font-family: inherit; }
  .overlay { display: none; }

  @media (max-width: 768px) {
    .mobile-toggle { display: flex !important; }
    .sidebar { position: fixed; left: 0; top: 56px; bottom: 0; z-index: 30; width: 280px; transition: transform 0.3s ease; }
    .sidebar.closed { transform: translateX(-100%); }
    .sidebar.open { transform: translateX(0); }
    .overlay.open { display: block; position: fixed; inset: 0; top: 56px; background: rgba(0,0,0,0.5); z-index: 25; }
    .main-content { padding: 24px 16px; }
    .landing-inner { padding: 40px 16px 24px; }
  }
</style>
</head>
<body>
<div id="root"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>

<script type="text/babel">
const { useState, useEffect, useRef, useMemo, useCallback } = React;

// ─── Topics Data ─────────────────────────────────────────────────────────────
const TOPICS_RAW = [{"id": "code-rapid-response-acls-essentials", "title": "Code/Rapid Response & ACLS Essentials", "category": "", "updated": "2026-02-19", "markdown": "<#)Code/Rapid Response & ACLS Essentials>\n\n## Panic Card (3–6 bullets)\n- Confirm unresponsiveness + absent/abnormal breathing; call Code/RRT; start highquality CPR 100–120/min, depth 5–6 cm, full recoil, pauses <10 s; rotate compressor q2 min ahajournals.org\n- Attach pads/monitor ASAP; identify rhythm: shockable (VF/pVT) vs nonshockable (PEA/asystole); treat immediately per rhythm ahajournals.org\n- Shockable: defibrillate, resume CPR immediately; give epinephrine 1 mg IV/IO q3–5 min (start after 2nd shock); add antiarrhythmic for refractory VF/pVT (amiodarone 300 mg IV bolus then 150 mg or lidocaine 1–1.5 mg/kg) ahajournals.org, acc.org\n- Nonshockable: CPR + epinephrine 1 mg IV/IO ASAP, then q3–5 min; recheck rhythm q2 min; aggressively search/treat Hs & Ts (esp. hypoxia, hypovolemia/bleeding, hyperkalemia, tamponade, tension PTX, thrombosis) ahajournals.org\n- Airway/ventilation: O₂, BVM with good seal; once advanced airway placed, compressions continuous + ventilate 10/min; confirm with waveform capnography; target SpO₂ 92–98% after ROSC ahajournals.org\n- PostROSC: stabilize ABCs; avoid hypotension (MAP ≥65 mmHg or SBP ≥90 mmHg); obtain 12lead ECG ASAP; start deliberate temperature control if not following commands (maintain 32–37.5°C, avoid fever) ahajournals.org, acc.org\n\n## Brief Overview (450–700 words; bulleted)\n- Nightfloat reality: your highest value is team choreography—start compressions, delegate roles, and prevent “CPR drift” (rate slows, depth shallows, long pulse checks). Use a loud timer: “compressions on,” “rhythm check in 10,” “back on chest.” ahajournals.org\n- Guideline MustKnow #1 (CPR quality): compress at 100–120/min, depth 5–6 cm, allow full recoil, minimize pauses (especially preshock), switch compressor q2 min to reduce fatigue. ahajournals.org\n- Guideline MustKnow #2 (shockable sequence): defibrillate VF/pVT immediately, then CPR 2 min; rhythm check; defibrillate again if still VF/pVT; epinephrine after 2nd shock and continue q3–5 min; consider amiodarone/lidocaine for refractory VF/pVT. ahajournals.org, acc.org\n- Defibrillation pitfalls: don’t “stack” pulse checks; shock then immediately resume CPR (no rhythm analysis delay beyond the brief check). Ensure pad contact, correct energy selection per device, and clear communication (“all clear”). ahajournals.org\n- Guideline MustKnow #3 (nonshockable): for PEA/asystole, prioritize CPR + epinephrine ASAP, and treat reversible causes; do not waste cycles “hunting” for a rhythm during compressions. ahajournals.org\n- Airway strategy at night: BVM done well often beats rushed intubation. If intubating, keep pauses <10 s; confirm placement with continuous waveform capnography (also provides CPR quality feedback—persistently very low ETCO₂ suggests poor perfusion or prolonged arrest). ahajournals.org\n- Guideline MustKnow #4 (meds you should NOT give routinely): avoid routine calcium, sodium bicarbonate, and magnesium during cardiac arrest; reserve for specific indications (e.g., hyperkalemia → calcium; TCA overdose → bicarbonate; torsades → magnesium). acc.org\n- Hyperkalemia “can’t miss” (especially ESRD/ACEi/spironolactone): if ECG/arrest suggests hyperK, treat as a reversible cause while continuing ACLS—calcium chloride 1 g IV (central) or calcium gluconate 3 g IV (peripheral), then regular insulin 10 units IV + dextrose 25 g, plus betaagonist neb; arrange definitive removal (dialysis) once ROSC. ahajournals.org, acc.org\n- Guideline MustKnow #5 (ROSC oxygen/vent): after ROSC, avoid hyperoxia/hypoxia—titrate to SpO₂ 92–98%; avoid hyperventilation—target normal ventilation and PaCO₂, and use lungprotective settings if intubated. ahajournals.org\n- Guideline MustKnow #6 (postROSC BP): treat hypotension—give crystalloid bolus and start vasopressors to maintain MAP ≥65 mmHg or SBP ≥90 mmHg; practical pressor hierarchy overnight: norepinephrine firstline, add vasopressin/epi per shock phenotype and institutional practice. ahajournals.org\n- Guideline MustKnow #7 (ECG/cath): obtain 12lead ECG ASAP; STelevation → emergent coronary angiography; no STEMI and no shock/electrical instability/ongoing ischemia → emergent cath is not routinely beneficial compared with delayed/selective strategy. acc.org\n- Guideline MustKnow #8 (temperature control): if patient does not follow commands after ROSC, use a deliberate strategy for temperature control; maintain a constant temperature between 32°C and 37.5°C, typically for ≥24 h, and prevent fever thereafter. acc.org, ahajournals.org\n- Neuroprognostication pitfall: do not make early irreversible decisions based on initial coma. Use multimodal assessment and avoid premature withdrawal of lifesustaining therapy solely for “poor exam” soon after ROSC. ahajournals.org\n- Confirm Before Proceed (irreversible): verify code status/DNR documentation early; if uncertain and arrest is active, proceed with resuscitation while someone clarifies. Before terminating resuscitation, confirm rhythm, downtime, reversible causes addressed, and team consensus per policy. ahajournals.org\n- Special populations you must autoflag:\n  - Pregnancy: perform left uterine displacement; if refractory arrest and viable gestation, prepare for perimortem cesarean to improve maternal resuscitation. ahajournals.org\n  - Severe CKD/ESRD: high suspicion for hyperkalemia and volume issues; drug dosing/accumulation considerations postROSC. ahajournals.org\n  - Cirrhosis/active GI bleed: anticipate coagulopathy/variceal risk; be cautious with empiric anticoagulation postROSC unless clear indication; communicate bleeding risk to ICU. ahajournals.org\n  - QT risk: avoid QTprolonging agents when alternatives exist; torsades management is magnesium and defibrillation if unstable. acc.org, ahajournals.org\n- Rapid Response (nonarrest) highyield: treat the trajectory early—hypoxia, hypotension, altered mental status, rising lactate, escalating oxygen/pressor needs—before arrest occurs; call ICU early when trends are worsening despite initial measures. ahajournals.org\n\n## Top ICU/Consult Triggers (3–5 bullets)\n- Any cardiac arrest with ROSC requiring vasopressors or mechanical ventilation, or persistent shock (MAP <65 mmHg despite fluids/pressors) ahajournals.org\n- Refractory VF/pVT (≥3 shocks) or recurrent malignant arrhythmia; consideration for advanced therapies (e.g., ECPR where available) acc.org\n- PostROSC coma (not following commands) needing temperature control, continuous EEG consideration, or complex neuroprognostication acc.org, ahajournals.org\n- Suspected STEMI or highrisk ACS after ROSC → urgent cardiology for cath pathway acc.org\n- Suspected massive PE, tamponade, tension PTX, or ongoing hemorrhage as arrest etiology (requires definitive procedural intervention) ahajournals.org\n\n## Orders to Place Now (3–6 bullets)\n- Activate: {Code Blue/Rapid Response} + {Crash cart to bedside} + {Defibrillator pads apply now}\n- {ACLS adult cardiac arrest order set} including {epinephrine 1 mg IV/IO q3–5 min} and {amiodarone 300 mg IV push for refractory VF/pVT}\n- {STAT labs}: ABG/VBG, {BMP with Mg/Phos}, CBC, lactate, troponin, coags, type & screen\n- {STAT 12lead ECG} (postROSC) + {portable CXR} (post airway/lines)\n- {Vasopressor infusion}: {norepinephrine start 0.05 mcg/kg/min, titrate to MAP ≥65} (postROSC shock)\n- {Temperature control protocol} if not following commands after ROSC (target {32–37.5°C} with strict fever prevention) acc.org\n\n## ABIM-Style Question\nABIMStyle Question A 67yearold man on telemetry becomes unresponsive. He has no pulse and the monitor shows ventricular fibrillation. Highquality CPR is started immediately and pads are applied. He receives one defibrillation shock and CPR resumes. After 2 minutes, rhythm check again shows VF. An IV is in place. Which is the best next step? A. Administer amiodarone 300 mg IV push immediately, then resume CPR\nB. Deliver a second defibrillation shock, resume CPR, and administer epinephrine 1 mg IV\nC. Continue CPR for another 4 minutes before any additional shocks to minimize myocardial injury\nD. Administer sodium bicarbonate 50 mEq IV, then deliver a second shock\nE. Administer calcium chloride 1 g IV, then deliver a second shock\nCorrect answer: B —\nWhy the answer is correct (2–4 sentences)\nFor shockable cardiac arrest (VF/pVT), guidelines prioritize rapid defibrillation with immediate CPR and repeat rhythm checks every 2 minutes; if VF persists, a second shock is delivered and CPR resumed. Epinephrine 1 mg IV/IO q3–5 min is recommended in cardiac arrest and, in the shockable algorithm, is typically started after the 2nd shock while CPR continues. Routine bicarbonate or calcium is not recommended unless a specific indication exists (e.g., TCA overdose for bicarbonate, hyperkalemia for calcium), and delaying defibrillation reduces survival. ahajournals.org, acc.org\nSecond ABIMstyle case A 58yearold woman with ESRD on hemodialysis is found unresponsive on the ward shortly after missing dialysis. She is pulseless; the rhythm is PEA. CPR is initiated and epinephrine is given. During the rhythm check, the prearrest telemetry strip is reviewed and shows progressive QRS widening with peaked T waves before collapse. Which immediate adjunct treatment is most appropriate to add while continuing standard PEA ACLS? A. Magnesium sulfate 2 g IV\nB. Sodium bicarbonate 50 mEq IV routinely during arrest\nC. Calcium administration for suspected hyperkalemia\nD. Highdose epinephrine (5 mg) IV bolus\nE. Immediate synchronized cardioversion\nCorrect answer: C —\nWhy the answer is correct (2–4 sentences)\nRoutine calcium is not recommended in undifferentiated cardiac arrest, but when hyperkalemia is strongly suspected (ESRD, widening QRS/peaked T waves), calcium is an indicated therapy to stabilize the myocardium while ACLS continues. This is a classic “Hs & Ts” arrest where treating the reversible cause can change outcomes; bicarbonate/magnesium are reserved for specific toxidromes or torsades, not routine PEA. What changed the decision here? acc.org, ahajournals.org\n\n### 3–5 CheckYourself MicroQuestions\n- During VF arrest, after which shock do you typically start epinephrine 1 mg IV/IO q3–5 min? ahajournals.org\n- What are the minimum CPR quality targets for rate and depth in adults? ahajournals.org\n- After ROSC, what SpO₂ range should you target to avoid hypoxia and hyperoxia? ahajournals.org\n- After ROSC in a comatose patient, what temperature range should be maintained during deliberate temperature control? acc.org\n- Name two “Ts” you must actively evaluate for during arrest that require definitive procedural treatment. ahajournals.org\n\n## Guidelines & Key References (3–5 bullets)\n- 2020 AHA Guidelines for CPR & ECC, Part 3: Adult Basic and Advanced Life Support (Circulation 2020) — https://www.ahajournals.org/doi/pdf/10.1161/CIR.0000000000000916 ahajournals.org\n- Highlights of the 2020 AHA Guidelines for CPR & ECC (AHA PDF) — https://cpr.heart.org/-/media/cpr-files/cpr-guidelines-files/highlights/hghlghts_2020_ecc_guidelines_english.pdf cpr.heart.org\n- 2023 AHA Focused Update on Adult ACLS (Professional Heart Daily landing page) — https://professional.heart.org/en/science-news/2023-aha-focused-update-on-adult-advanced-cardiovascular-life-support profession....heart.org\n- 2023 AHA Focused Update “Key Points” summary (ACC) — https://www.acc.org/latest-in-cardiology/ten-points-to-remember/2023/12/21/16/43/2023-aha-adult-acls acc.org\n\n## CDI: What to Document Clearly Tonight (3–5 bullets)\n- Cardiac arrest type + initial rhythm (VF/pVT vs PEA/asystole) + suspected cause (Hs/Ts) with objective evidence (ECG changes, labs, imaging)\n- Exact times: last known well, CPR start, shocks (number/energy), meds (dose/route), airway placement, ROSC time and downtime estimate\n- PostROSC status: neuro exam (following commands vs comatose), hemodynamics (MAP/SBP), oxygenation/ventilation targets (SpO₂, ETCO₂/ABG)\n- Code status verification process (DNR/DNI review, surrogate contact) and decisionmaking around continuation/termination of resuscitation\n- Disposition and escalation: ICU acceptance, consults (cards/neuro), and rationale (shock, STEMI concern, temperature control need)\nLast content check: 2026-02-19\n"}, {"id": "sepsis-recognition-early-management", "title": "Sepsis Recognition & Early Management", "category": "", "updated": "2026-02-19", "markdown": "<#)Sepsis Recognition & Early Management>\n\n## Panic Card (3–6 bullets)\n- Suspect sepsis = infection + acute organ dysfunction; if shock physiology, treat as septic shock until proven otherwise (don’t wait for cultures). bumc.bu.edu, esbicm.org\n- Within 1 hour for septic shock/high likelihood: draw 2 blood culture sets (if no delay), measure lactate, give broadspectrum antibiotics, start crystalloid bolus. esbicm.org, sccm.org\n- Fluids: give 30 mL/kg IV crystalloid within 3 hours for sepsisinduced hypoperfusion or septic shock; reassess frequently using dynamic perfusion markers. esbicm.org, guidelines...dcross.org\n- If hypotension persists during/after fluids: start norepinephrine and titrate to MAP ≥65 mmHg; add vasopressin/epi per response; place arterial line when feasible. esbicm.org, guidelines...dcross.org\n- Source control: identify and act early (drain, remove infected lines, decompress obstruction); coordinate ICU/surgery/IR—don’t let “antibiotics only” be the plan if a source is fixable. esbicm.org\n- Confirm Before Proceed: document DNR status; avoid anchoring—screen pregnancy, severe CKD/ESRD, cirrhosis/bleeding risk, QTrisk meds before irreversible steps (central line/pressors, intubation, emergent procedures). esbicm.org, bumc.bu.edu\n\n## Brief Overview (450–700 words; bulleted)\n- Define what you’re treating: Sepsis = suspected/confirmed infection + lifethreatening organ dysfunction (operationally acute SOFA increase ≥2). Septic shock = sepsis + vasopressors needed to keep MAP ≥65 + lactate >2 mmol/L despite adequate fluids—high mortality; act fast even before full criteria if crashing. bumc.bu.edu, esbicm.org\n- Guideline MustKnow #1 (screening): do not use qSOFA alone as a sepsis screening gatekeeper; use clinical suspicion + vitals + labs/organ dysfunction and escalate early when trajectory worsens overnight. esbicm.org, bumc.bu.edu\n- Guideline MustKnow #2 (timing of antibiotics): for septic shock or high likelihood of sepsis, deliver effective IV antimicrobials as soon as possible; delays increase harm. If possible, obtain cultures first, but never at the cost of meaningful delay. esbicm.org, sccm.org\n- Antibiotic “nightfloat” execution: give one appropriately broad regimen promptly, then deescalate when source/cultures clarify. Use history for MDR risk (recent IV antibiotics/hospitalization, prior ESBL/MRSA/Pseudomonas, indwelling devices) and tailor to likely source (lung/urine/abdomen/line/skin). esbicm.org, sccm.org\n- Guideline MustKnow #3 (lactate strategy): measure lactate early; if elevated, remeasure to document clearance/trajectory and guide resuscitation. Trending down matters more than a single value. esbicm.org, sccm.org\n- Guideline MustKnow #4 (initial fluids): for sepsisinduced hypoperfusion/septic shock, start 30 mL/kg IV crystalloid within 3 hours; prefer balanced crystalloids when available; avoid reflex extra liters without reassessment (ARDS/CKD/cirrhosis). esbicm.org, guidelines...dcross.org\n- Reassessment (what separates good from harmful): after each bolus, recheck perfusion using dynamic endpoints (capillary refill, skin temp/mottling, mentation, urine output, lactate trend; consider passive leg raise/bedside echo if skilled). Stop fluids when no longer fluid responsive or when pulmonary edema develops. esbicm.org, guidelines...dcross.org\n- Guideline MustKnow #5 (pressor hierarchy): firstline vasopressor is norepinephrine; initial target MAP ≥65 mmHg. Add vasopressin to raise MAP or reduce norepi dose; consider epinephrine if persistent shock. Avoid dopamine except select bradycardic patients with low arrhythmia risk. esbicm.org, guidelines...dcross.org\n- Practical pressor pitfalls at night: don’t “chase the MAP” with fluids if already overloaded; start norepinephrine peripherally if needed while securing central access (institutional policy), and get an arterial line when stable enough for accurate titration. esbicm.org\n- Guideline MustKnow #6 (steroids): if septic shock remains vasopressordependent despite adequate fluids and norepinephrine, consider hydrocortisone 200 mg/day IV (e.g., 50 mg IV q6h). esbicm.org\n- Respiratory/oxygen targets: treat hypoxemia promptly; avoid excessive oxygen and ventilator overdrive (hyperventilation lowers venous return and can worsen shock). If intubated, use lungprotective ventilation and coordinate with ICU early. esbicm.org\n- Guideline MustKnow #7 (source control timing): evaluate for a removable/drainable source early (obstructed urinary tract, intraabdominal catastrophe, necrotizing infection, infected catheter). When indicated, pursue source control urgently (often within 6–12 hours when feasible). esbicm.org\n- Line management: if catheterrelated infection is possible and no alternative source is clear, obtain paired cultures and remove/replace suspected infected lines promptly once alternative access is secured. esbicm.org\n- Transfusion and glucose “don’t overdo it”: avoid liberal transfusion unless there’s hemorrhage/ischemia (typical ICU threshold Hb ~70 g/L after stabilization per critical care norms) and target moderate inpatient glucose control (avoid hypoglycemia); coordinate with ICU protocols. esbicm.org\n- Autoflag highrisk modifiers tonight:\n  - Pregnancy/recent pregnancy: sepsis can masquerade; early OB involvement and aggressive maternal stabilization. esbicm.org\n  - Severe CKD/ESRD: smaller fluid tolerance, early pressors, high hyperkalemia risk; doseadjust renally cleared antimicrobials. esbicm.org\n  - Cirrhosis: vasodilatory shock + bleeding risk; albumin/vasopressors may be needed; involve ICU early. esbicm.org\n  - QT risk: avoid stacking QTprolongers (fluoroquinolones/macrolides/antiemetics) when alternatives exist. esbicm.org\n- Nightfloat escalation rule: if lactate rising, MAP <65, escalating O₂/vent needs, new AMS, oliguria, or pressor requirement—call ICU early; sepsis kills through delays, not through imperfect first antibiotic choice. esbicm.org, sccm.org\n\n## Top ICU/Consult Triggers (3–5 bullets)\n- Septic shock: vasopressor need to maintain MAP ≥65 mmHg and/or lactate >2 mmol/L despite fluids, or rapidly rising lactate. bumc.bu.edu, esbicm.org\n- Worsening respiratory failure (increasing O₂ requirement, impending intubation, ARDS physiology) or severe metabolic acidosis/altered mental status. esbicm.org\n- Need for urgent source control (suspected perforation, obstructed infected stone, nec fasc, empyema, infected device) → immediate surgery/IR/urology consult. esbicm.org\n- Persistent hypotension after initial 30 mL/kg or signs of fluid overload limiting resuscitation (pulmonary edema) requiring pressors/advanced monitoring. esbicm.org, guidelines...dcross.org\n- Suspected meningitis/encephalitis, endocarditis, or neutropenic sepsis → early ID/neurology/oncology as appropriate. esbicm.org\n\n## Orders to Place Now (3–6 bullets)\n- {Sepsis/Septic Shock order set} + {Rapid Response/ICU consult} if shock physiology\n- {Blood cultures x2 sets} from separate sites + {Urinalysis/urine culture} + {Source cultures as indicated} (before antibiotics if no delay)\n- {Broadspectrum IV antibiotics now} with {renal dose adjustment} and {allergy assessment} documented\n- {Lactate now} and {repeat lactate in 2–4 h if elevated} + {CBC, CMP, Mg/Phos, coags} + {VBG/ABG as indicated}\n- {IV crystalloid bolus 30 mL/kg} for sepsisinduced hypoperfusion/septic shock, then {reassess fluid responsiveness q15–30 min}\n- {Norepinephrine infusion start 0.05 mcg/kg/min, titrate to MAP ≥65} if hypotension persists; {consider hydrocortisone 50 mg IV q6h} if pressorrefractory shock esbicm.org, guidelines...dcross.org\n\n## ABIM-Style Question\nABIMStyle Question A 72yearold man is admitted with pneumonia. Overnight he becomes confused and febrile with BP 82/46 mmHg, HR 118/min, RR 28/min, SpO₂ 92% on 2 L/min nasal cannula. Lactate is 4.6 mmol/L. Two largebore IVs are placed. Which intervention should be performed next to most improve survival? A. Delay antibiotics until chest CT identifies the source definitively\nB. Start norepinephrine immediately without giving IV fluids\nC. Administer 30 mL/kg IV crystalloid promptly and give broadspectrum IV antibiotics as soon as possible\nD. Transfuse packed red blood cells to a hemoglobin goal of 100 g/L before resuscitation\nE. Administer sodium bicarbonate routinely to normalize pH before fluids\nCorrect answer: C —\nWhy the answer is correct (2–4 sentences)\nHe has sepsisinduced hypoperfusion/septic shock physiology (hypotension with lactate ≥4). Surviving Sepsis Campaign recommends rapid resuscitation with 30 mL/kg IV crystalloid within 3 hours for septic shock/hypoperfusion and prompt IV antimicrobials—timesensitive actions linked to improved outcomes. Pressors are added if hypotension persists after/while fluids to maintain MAP ≥65 mmHg; routine transfusion to high targets or routine bicarbonate is not recommended. esbicm.org, sccm.org\nSecond ABIMstyle case A 64yearold woman with ESRD and CHF is evaluated for suspected UTI and sepsis: fever 38.9°C, BP 88/52 mmHg, HR 110/min, crackles at lung bases, and she is on 4 L/min oxygen. Lactate is 3.2 mmol/L. The nurse asks whether to give the full 30 mL/kg fluid bolus. What is the best next step? A. Withhold all fluids and treat only with diuretics\nB. Give 30 mL/kg as fast as possible without reassessment because guidelines mandate it\nC. Begin a smaller initial crystalloid bolus with frequent reassessment of fluid responsiveness and start norepinephrine early if hypotension persists\nD. Delay antibiotics until a repeat lactate confirms persistent elevation\nE. Give dopamine as the firstline vasopressor due to renal failure\nCorrect answer: C —\nWhy the answer is correct (2–4 sentences)\nSSC supports early crystalloid resuscitation for hypoperfusion but emphasizes reassessment using dynamic measures; in patients with limited fluid tolerance (CHF/ESRD), a staged approach with close reassessment and earlier vasopressors is appropriate to reach perfusion targets while avoiding fluid overload. Firstline vasopressor remains norepinephrine with MAP ≥65 mmHg target; antibiotics should not be delayed. What changed the decision here? esbicm.org, guidelines...dcross.org\n\n### 3–5 CheckYourself MicroQuestions\n- What two criteria define septic shock in Sepsis3 (MAP/pressor + lactate threshold)? bumc.bu.edu\n- In septic shock, what is the initial MAP target and firstline vasopressor? esbicm.org, guidelines...dcross.org\n- What is the recommended initial crystalloid dose/time window for sepsisinduced hypoperfusion? esbicm.org, guidelines...dcross.org\n- When should you remeasure lactate after an elevated initial value? esbicm.org, sccm.org\n- Name one sourcecontrol situation where “antibiotics only” is inadequate overnight. esbicm.org\n\n## Guidelines & Key References (3–5 bullets)\n- Surviving Sepsis Campaign: International Guidelines for Management of Sepsis and Septic Shock 2021 (PDF) — https://esbicm.org/wp-content/uploads/2025/08/Surviving-Sepsis-Guidelines-2021.pdf esbicm.org\n- SCCM Surviving Sepsis Campaign Adult Guidelines hub (includes Hour1 bundle resources) — https://www.sccm.org/survivingsepsiscampaign/guidelines-and-resources/surviving-sepsis-campaign-adult-guidelines sccm.org\n- Sepsis3: Third International Consensus Definitions for Sepsis and Septic Shock (JAMA 2016) — https://www.bumc.bu.edu/emergencymedicine/files/2016/04/Singer-et-al.-Third-Intnl-Consensus-Definition-Sepsis-Septic-Shock.-JAMA-2016.pdf bumc.bu.edu\n- IDSA endorsement page for SSC Adult Guidelines 2021 — https://www.idsociety.org/practice-guideline/surviving-sepsis-campaign-adult-guidelines-2021/ idsociety.org\n\n## BayCare-Specific Notes (only if dataset contains relevant keys)\n- Local antibiogram tables are not yet structured for reliable organismdrug percent mapping; avoid inventing susceptibility rates—use syndromebased empiric choices + patientspecific MDR history, then deescalate to cultures. newsroom.heart.org\n- Stewardship footnotes: fluoroquinolones are not firstline due to serious adverse effects; consider alternatives when clinically equivalent. newsroom.heart.org\n- Pseudomonas note: if reported piperacillin/tazobactam MIC is 32–64 mcg/mL, it may be ineffective—consider an alternate antipseudomonal agent. newsroom.heart.org\n- UTI nuance: cefazolin MIC breakpoint ≤16 applies only to uncomplicated urinary isolates (E. coli/K. pneumoniae/P. mirabilis); do not extrapolate urinary breakpoints to nonurine sources/sepsis. newsroom.heart.org\n- ESBL E. coli urine isolates: fosfomycin susceptibility reported as 98% (312/319) in the local notes, but this applies to urine isolates and is not a sepsis regimen. newsroom.heart.org\n\n## CDI: What to Document Clearly Tonight (3–5 bullets)\n- Sepsis vs septic shock with objective evidence: suspected source + acute organ dysfunction (SOFA elements), MAP/BP, lactate, urine output, mental status\n- Timing: sepsis recognition time, cultures drawn, antibiotics started (drug/dose/time), fluid volume (mL/kg) and response, pressor start time and MAP target ≥65\n- Hemodynamic/respiratory severity: vasopressor requirement, oxygen/vent support level, ABG/VBG findings, trend of lactate and perfusion markers\n- Source control plan: suspected focus, imaging obtained/ordered, consults (ICU/ID/surgery/IR/urology), and timecritical barriers addressed\n- Comorbid modifiers impacting management: CKD/ESRD, CHF/cirrhosis, immunosuppression, pregnancy status, allergy/MDR history and how it changed antibiotics\nLast content check: 2026-02-19\n"}, {"id": "undifferentiated-hypotension-shock", "title": "Undifferentiated Hypotension/Shock", "category": "", "updated": "2026-02-19", "markdown": "<#)Undifferentiated Hypotension/Shock>\n\n## Panic Card (3–6 bullets)\n- Confirm true hypotension + perfusion: recheck cuff/arm, assess mentation/skin/cap refill, pulses, urine output; treat as shock if endorgan hypoperfusion even with “normal” BP.\n- ABCs first: O₂, airway support if failing; place 2 largebore IVs (or IO), start continuous monitor, obtain 12lead ECG early; bedside glucose now.\n- If hemorrhage suspected: activate MTP early; give blood products (don’t “crystalloid drown”); Confirm Before Proceed: verify bleeding source + anticoagulants/reversal plan before massive transfusion pathway. clinlab.ucsf.edu\n- If septic shock/high likelihood: draw cultures if no delay, measure lactate, start broadspectrum antibiotics; give crystalloid 30 mL/kg for hypotension or lactate ≥4 mmol/L; start pressors for MAP ≥65 mmHg. esbicm.org, rwjbh.org\n- If obstructive shock suspected (tamponade, tension PTX, massive PE): treat immediately (needle decompression, pericardiocentesis/consult, thrombostrategy); bedside ultrasound can rapidly differentiate patterns. emj.bmj.com\n- Pressor hierarchy (default until phenotype clarified): norepinephrine firstline, titrate to MAP ≥65 mmHg; add vasopressin/epi per response; avoid dopamine unless select bradycardic situations due to arrhythmia risk. esbicm.org, ccpem.blog\n\n## Brief Overview (450–700 words; bulleted)\n- Think in 4 buckets and force yourself to pick one (then be ready to switch): hypovolemic (hemorrhage/dehydration), distributive (sepsis/anaphylaxis), cardiogenic (pump failure/MI), obstructive (PE/tamponade/tension PTX); mixed shock is common on the wards (e.g., septic + cardiogenic). esbicm.org, ahajournals.org\n- Guideline MustKnow #1 (targets): resuscitate to perfusion, not a pretty number; a practical initial goal is MAP ≥65 mmHg, while watching mentation, urine output, lactate/acid–base, and skin perfusion. esbicm.org, rwjbh.org\n- Immediate bedside triage questions (nightfloat speed): “Is there bleeding?”, “Is there infection?”, “Is there pump failure/arrhythmia?”, “Is there an obstruction I can’t wait on?”—these determine whether you prioritize blood, antibiotics + fluids, inotrope/afterload, or procedural rescue. esbicm.org, ahajournals.org\n- Guideline MustKnow #2 (septic shock early bundle): for hypotension or lactate ≥4, give 30 mL/kg crystalloid rapidly and start vasopressors if hypotensive during/after fluids to maintain MAP ≥65; measure lactate and remeasure if initially >2 mmol/L; start antibiotics promptly, with cultures first only if no meaningful delay. rwjbh.org, esbicm.org\n- Fluids are a drug: in distributive shock, give an initial bolus, then reassess fluid responsiveness frequently (cap refill, lactate trajectory, passive leg raise, bedside echo/IVC if skilled); stop when no longer responsive or pulmonary edema appears—then pivot to pressors. esbicm.org, emj.bmj.com\n- Guideline MustKnow #3 (pressor hierarchy): in septic/distributive physiology, norepinephrine firstline; add vasopressin to raise MAP or reduce norepi dose; consider epinephrine if refractory; dopamine is generally avoided due to arrhythmias. esbicm.org, ccpem.blog\n- Cardiogenic shock clues: cold/clammy extremities, narrow pulse pressure, pulmonary edema, elevated JVP, ischemic ECG, rising lactate/creatinine; treat precipitant (MI/arrhythmia/valve catastrophe), avoid excess fluids, and involve cardiology/ICU early. ahajournals.org, heartfailu...atters.org\n- Guideline MustKnow #4 (cardiogenic support): vasopressor choice often starts with norepinephrine to maintain perfusion pressure, then add inotrope (e.g., dobutamine) when low cardiac output dominates; definitive therapy may be urgent revascularization or mechanical circulatory support in selected patients. ahajournals.org, heartfailu...atters.org\n- Obstructive shock is timecritical: tension PTX (unilateral absent breath sounds, tracheal deviation late), tamponade (JVP ↑, muffled heart sounds, pulsus), massive PE (acute RV strain, hypoxemia, syncope). Do not “wait for CT” if crashing—stabilize and escalate for definitive intervention. emj.bmj.com, ahajournals.org\n- Guideline MustKnow #5 (anaphylaxis): treat immediately with IM epinephrine 0.01 mg/kg (max 0.5 mg) in the midanterolateral thigh, repeat every 5–15 min as needed; add highflow O₂ and rapid isotonic fluids; airway early if stridor/rapid progression. worldaller...ournal.org, worldallergy.org\n- Arrhythmiadriven shock: any unstable tachyarrhythmia → synchronized cardioversion; symptomatic bradycardia with hypotension/AMS/ischemia → atropine 1 mg IV q3–5 min (max 3 mg), then pacing and/or epinephrine infusion 2–10 mcg/min or dopamine 5–20 mcg/kg/min. actcpr.com\n- Guideline MustKnow #6 (hemorrhagic shock + transfusion): if ongoing bleeding suspected, early balanced blood product resuscitation is lifesaving; transfusion thresholds like Hb <7 g/dL apply to stable patients—not exsanguinating shock—so don’t let a “normal hemoglobin” early in bleeding falsely reassure you. clinlab.ucsf.edu, jamanetwork.com\n- Focused bedside ultrasound (RUSH/ACES concepts) can rapidly narrow the bucket: heart (contractility, RV strain, pericardial effusion), IVC, aorta, lungs/pleura, free fluid—use it to guide first moves while definitive tests are pending. emj.bmj.com\n- Pitfalls that kill at night: anchoring on “sepsis” while missing hemorrhage (GI bleed/retroperitoneal bleed on anticoagulants), giving liters to cardiogenic shock, delaying epinephrine in anaphylaxis, missing hyperkalemia/toxin bradycardia, and underescalating obstructive shock. worldaller...ournal.org, actcpr.com\n- Autoflag modifiers before committing to irreversible steps:\n  - Pregnancy/recent pregnancy: hemorrhage/PE risk; consider aortocaval compression and obstetric causes.\n  - Severe CKD/ESRD: hyperkalemia and volume intolerance; treat hyperK in correct sequence (calcium → insulin/dextrose → betaagonist) while diagnosing.\n  - Cirrhosis/active GI bleed: low SVR baseline + bleeding risk; early GI/ICU and reversal plans.\n  - QT risk: avoid stacking QTprolongers when selecting antiemetics/antibiotics/antiarrhythmics. actcpr.com, clinlab.ucsf.edu\n- Escalation is a treatment: persistent hypotension after initial interventions, rising lactate, increasing O₂/vent support, new oliguria/AMS, or need for pressors = ICUlevel care; call early rather than “one more liter.” esbicm.org, ahajournals.org\n\n## Top ICU/Consult Triggers (3–5 bullets)\n- Need for vasopressors to maintain MAP ≥65 mmHg or rising lactate/ongoing hypoperfusion despite initial resuscitation. esbicm.org, rwjbh.org\n- Suspected cardiogenic shock with pulmonary edema, ischemic ECG, recurrent malignant arrhythmia, or need for inotrope/mechanical support evaluation. ahajournals.org, heartfailu...atters.org\n- Suspected obstructive shock (tamponade, tension PTX, massive PE) requiring urgent procedural/advanced therapy. emj.bmj.com, ahajournals.org\n- Active hemorrhage (GI bleed, postprocedure bleed, trauma/retroperitoneal) or MTP activation. clinlab.ucsf.edu\n- Anaphylaxis with airway compromise, refractory hypotension after IM epinephrine, or biphasic reaction risk needing ICU monitoring. worldaller...ournal.org, worldallergy.org\n\n## Orders to Place Now (3–6 bullets)\n- {Rapid Response/ICU consult now} + {Continuous telemetry} + {12lead ECG STAT} actcpr.com\n- {STAT labs}: CBC, CMP, Mg/Phos, VBG/ABG, lactate, troponin, coags, type & screen; {bedside glucose} rwjbh.org, esbicm.org\n- {IV access x2 large bore} + {1 L isotonic crystalloid bolus} with {reassess q10–15 min}; if sepsis likely: {Sepsis bundle orders} (cultures + antibiotics + lactate repeat) rwjbh.org, esbicm.org\n- {Norepinephrine infusion start 0.05 mcg/kg/min, titrate to MAP ≥65} if hypotension persists during/after fluids esbicm.org, ccpem.blog\n- {Bedside ultrasound—RUSH/ACES views} (cardiac + IVC + lungs/pleura + aorta + free fluid) emj.bmj.com\n- If anaphylaxis suspected: {Epinephrine IM 0.5 mg (1 mg/mL) to lateral thigh, repeat q5–15 min PRN} + {highflow O₂} + {rapid isotonic fluids} worldaller...ournal.org, worldallergy.org\n\n## ABIM-Style Question\nABIMStyle Question A 69yearold man is hospitalized for urosepsis ruleout. Overnight he becomes lethargic with BP 78/44 mmHg and HR 118/min. He is warm to touch with bounding pulses. SpO₂ is 95% on room air. Lactate is 4.2 mmol/L. Lungs are clear, JVP is not elevated, and there is no active bleeding. Which is the best next step? A. Start dopamine infusion as the firstline vasopressor\nB. Give 30 mL/kg IV crystalloid promptly and administer broadspectrum IV antibiotics as soon as possible\nC. Administer IV furosemide for presumed occult cardiogenic shock\nD. Withhold fluids and proceed directly to emergent coronary angiography\nE. Delay antibiotics until blood cultures result to avoid unnecessary broadspectrum coverage\nCorrect answer: B —\nWhy the answer is correct (2–4 sentences)\nHe has distributive shock physiology with hypoperfusion (hypotension plus lactate ≥4 mmol/L). Surviving Sepsis Campaign hour1 bundle calls for rapid crystalloid 30 mL/kg for hypotension or lactate ≥4, prompt broadspectrum antimicrobials (cultures first only if no delay), and vasopressors if hypotension persists to maintain MAP ≥65 mmHg. Dopamine is not preferred due to arrhythmia risk, and diuresis/angiography are not first steps in this phenotype. rwjbh.org, esbicm.org\nSecond ABIMstyle case A 61yearold woman with ESRD misses dialysis and becomes hypotensive (BP 84/50 mmHg) with HR 38/min and mild confusion. Telemetry shows a wide QRS rhythm. She is afebrile and has no bleeding. Which immediate intervention is most appropriate while you continue evaluation of shock etiology? A. Largevolume crystalloid bolus (30 mL/kg) before any other intervention\nB. Atropine 1 mg IV and observe without further action\nC. Treat suspected hyperkalemia with IV calcium first, then shift potassium intracellularly\nD. Synchronized cardioversion\nE. Broadspectrum antibiotics within 1 hour\nCorrect answer: C —\nWhy the answer is correct (2–4 sentences)\nIn ESRD with bradycardia and wide QRS, hyperkalemia is a reversible, lethal cause of shock/neararrest; immediate myocardial stabilization with IV calcium is the priority before or alongside other measures, followed by therapies that shift potassium intracellularly. Atropine may fail when the primary problem is membrane excitability from hyperkalemia, and large fluid boluses risk overload. What changed the decision here? actcpr.com, esbicm.org\n\n### 3–5 CheckYourself MicroQuestions\n- If septic shock is likely, what are the two thresholds that trigger rapid fluids in the hour1 bundle (BP and lactate)? rwjbh.org\n- In symptomatic bradycardia with hypotension, what is the first atropine dose and maximum total dose? actcpr.com\n- What is the firstline vasopressor and initial MAP target for distributive/septic shock? esbicm.org, ccpem.blog\n- What is the firstline medication and route for anaphylaxis, and how often can it be repeated? worldaller...ournal.org, worldallergy.org\n- On bedside ultrasound, which finding most suggests obstructive shock from tamponade? emj.bmj.com\n\n## Guidelines & Key References (3–5 bullets)\n- Surviving Sepsis Campaign: International Guidelines for Management of Sepsis and Septic Shock 2021 (PDF) — https://esbicm.org/wp-content/uploads/2025/08/Surviving-Sepsis-Guidelines-2021.pdf esbicm.org\n- Surviving Sepsis Campaign Hour1 Bundle (summary card) — https://www.rwjbh.org/documents/nursing/nursing-resources/Surviving-Sepsis-Campaign-Hour-1-Bundle.pdf rwjbh.org\n- AHA Scientific Statement: Contemporary Management of Cardiogenic Shock 2017 (PDF) — https://www.ahajournals.org/doi/pdf/10.1161/CIR.0000000000000525 ahajournals.org\n- World Allergy Organization Anaphylaxis Guidance 2020 — https://www.worldallergyorganizationjournal.org/article/S1939-4551%2820%2930375-6/fulltext worldaller...ournal.org\n- Red Blood Cell Transfusion: 2023 AABB International Guidelines (PDF) — https://clinlab.ucsf.edu/sites/g/files/tkssra15786/files/wysiwyg/RBC%20Transfusion%202023%20AABB%20International%20Guidelines.pdf clinlab.ucsf.edu\n\n## BayCare-Specific Notes (only if dataset contains relevant keys)\n- If shock phenotype suggests sepsis and antibiotics are being started, local stewardship notes emphasize that fluoroquinolones are not firstline due to serious adverse effects; favor alternatives when clinically appropriate. youtube.com\n- If Pseudomonas is suspected/known and piperacillin/tazobactam MIC is reported as 32–64 mcg/mL, it may be ineffective—consider an alternate antipseudomonal agent while awaiting definitive susceptibilities. youtube.com\n\n## CDI: What to Document Clearly Tonight (3–5 bullets)\n- Shock type suspected (hypovolemic/distributive/cardiogenic/obstructive) + objective evidence (exam, lactate/ABG, ECG, ultrasound findings)\n- Hemodynamic severity: lowest BP/MAP, pressor requirement (drug + max dose), fluid volumes given (mL/kg) and response, urine output trend\n- Timecritical actions: sepsis bundle elements (cultures, antibiotics start time), MTP activation, epinephrine for anaphylaxis, cardioversion/pacing with times\n- Key modifiers affecting management: pregnancy status, CKD/ESRD, cirrhosis/bleeding risk, QT risk, anticoagulant use and reversal plan\n- Disposition/escalation: ICU/consults requested, procedural plans (source control, cath/echo), and rationale for escalation\nLast content check: 2026-02-19\n"}];

// ─── Section Metadata ────────────────────────────────────────────────────────
const SECTION_META = {
  "Panic Card":                          { icon: "🚨", color: "#FF4136", label: "Panic Card" },
  "Brief Overview":                      { icon: "📋", color: "#0074D9", label: "Overview" },
  "Top ICU/Consult Triggers":            { icon: "🏥", color: "#FF851B", label: "ICU Triggers" },
  "Orders to Place Now":                 { icon: "📝", color: "#2ECC40", label: "Orders" },
  "ABIM-Style Question":                 { icon: "🧠", color: "#B10DC9", label: "Quiz" },
  "Guidelines & Key References":         { icon: "📚", color: "#39CCCC", label: "References" },
  "CDI: What to Document Clearly Tonight":{ icon: "✍️", color: "#FFDC00", label: "CDI Docs" },
  "BayCare-Specific Notes":              { icon: "🏨", color: "#F012BE", label: "BayCare" },
};

const TOPIC_ICONS = ["🫀","🦠","📉","💊","🫁","🧬","🩺","⚡","🩸","🧪","🦴","🧫","💉","🔬","🫀","🦠","📉","💊","🫁","🧬","🩺","⚡","🩸","🧪","🦴","🧫","💉","🔬","🫀","🦠"];
const ACCENT_COLORS = ["#6366f1","#a855f7","#ec4899","#f97316","#14b8a6","#3b82f6","#8b5cf6","#ef4444","#10b981","#f59e0b"];

// ─── Parsers ─────────────────────────────────────────────────────────────────
function parseTopicMarkdown(md) {
  const parts = md.split(/\n## /);
  const sections = [];
  for (let i = 1; i < parts.length; i++) {
    const lines = parts[i].split("\n");
    const rawTitle = lines[0].replace(/\(.*?\)/g, "").trim();
    const content = lines.slice(1).join("\n").trim();
    const meta = Object.entries(SECTION_META).find(([key]) => rawTitle.startsWith(key));
    if (meta) {
      sections.push({ key: meta[0], ...meta[1], rawTitle, content });
    } else {
      sections.push({ key: rawTitle, icon: "📄", color: "#AAA", label: rawTitle.slice(0, 24), rawTitle, content });
    }
  }
  return sections;
}

function parseQuizSection(content) {
  const questions = [];
  const caseBlocks = content.split(/(?=(?:ABIMStyle Question|Second ABIMstyle case|Third ABIMstyle case))/i).filter(b => b.trim());
  for (const block of caseBlocks) {
    const lines = block.trim().split("\n").filter(l => l.trim());
    let stem = "", choices = [], correctLetter = "", explanation = "", inExplanation = false, stemDone = false;
    for (const line of lines) {
      const choiceMatch = line.match(/^([A-E])\.\s+(.+)/);
      const correctMatch = line.match(/^Correct answer:\s*([A-E])/);
      const whyMatch = line.match(/^Why the answer is correct/);
      if (correctMatch) { correctLetter = correctMatch[1]; inExplanation = false; }
      else if (whyMatch) { inExplanation = true; }
      else if (inExplanation) { explanation += line.trim() + " "; }
      else if (choiceMatch) { stemDone = true; choices.push({ letter: choiceMatch[1], text: choiceMatch[2].trim() }); }
      else if (!stemDone) { const c = line.replace(/^(ABIMStyle Question|Second ABIMstyle case|Third ABIMstyle case)\s*/i, "").trim(); if (c) stem += c + " "; }
    }
    if (stem && choices.length >= 2) questions.push({ stem: stem.trim(), choices, correctLetter: correctLetter || "B", explanation: explanation.trim() });
  }
  const microMatch = content.match(/###\s*\d*[–-]?\d*\s*Check.?Yourself.*?\n([\s\S]*?)$/i);
  let microQuestions = [];
  if (microMatch) microQuestions = microMatch[1].split("\n").filter(l => l.trim().startsWith("-")).map(l => l.replace(/^-\s*/, "").replace(/\s+\S+\.\S+$/g, "").trim());
  return { questions, microQuestions };
}

// ─── Content Renderers ───────────────────────────────────────────────────────
function InlineText({ text }) {
  const parts = text.split(/(\{[^}]+\})/g);
  return React.createElement(React.Fragment, null,
    parts.map((part, i) => {
      if (part.startsWith("{") && part.endsWith("}")) {
        return React.createElement("span", { key: i, className: "order-badge" }, part.slice(1, -1));
      }
      return React.createElement("span", { key: i }, part);
    })
  );
}

function BulletContent({ text }) {
  const lines = text.split("\n").filter(l => l.trim());
  const elements = [];
  let currentList = [];
  const flushList = () => {
    if (currentList.length) {
      elements.push(
        React.createElement("ul", { key: elements.length },
          currentList.map((item, i) =>
            React.createElement("li", { key: i },
              React.createElement("span", { className: "dot" }),
              React.createElement(InlineText, { text: item })
            )
          )
        )
      );
      currentList = [];
    }
  };
  for (const line of lines) {
    if (line.trim().startsWith("  - ")) {
      currentList.push("  ↳ " + line.trim().slice(4));
    } else if (line.trim().startsWith("- ")) {
      currentList.push(line.trim().slice(2));
    } else {
      flushList();
      elements.push(React.createElement("p", { key: elements.length }, React.createElement(InlineText, { text: line.trim() })));
    }
  }
  flushList();
  return React.createElement(React.Fragment, null, elements);
}

// ─── Quiz Component ──────────────────────────────────────────────────────────
function QuizCard({ question, index }) {
  const [selected, setSelected] = useState(null);
  const [revealed, setRevealed] = useState(false);

  const isCorrectSelection = selected === question.correctLetter;

  return React.createElement("div", { className: "quiz-card" },
    React.createElement("div", { style: { display: "flex", alignItems: "center", gap: 10, marginBottom: 16 } },
      React.createElement("span", { className: "quiz-num" }, index + 1),
      React.createElement("span", { className: "quiz-label" }, "Clinical Vignette")
    ),
    React.createElement("p", { className: "quiz-stem" }, question.stem),
    React.createElement("div", { style: { marginBottom: 16 } },
      question.choices.map(c => {
        const isCorrect = c.letter === question.correctLetter;
        const isSel = c.letter === selected;
        let bg = "rgba(30,41,59,0.7)", border = "1px solid rgba(148,163,184,0.15)", color = "#cbd5e1";
        if (revealed) {
          if (isCorrect) { bg = "rgba(34,197,94,0.15)"; border = "1px solid rgba(34,197,94,0.5)"; color = "#86efac"; }
          else if (isSel) { bg = "rgba(239,68,68,0.15)"; border = "1px solid rgba(239,68,68,0.4)"; color = "#fca5a5"; }
        } else if (isSel) { bg = "rgba(99,102,241,0.2)"; border = "1px solid rgba(99,102,241,0.5)"; color = "#c7d2fe"; }
        const letterBg = isSel && !revealed ? "rgba(99,102,241,0.3)" : "rgba(100,116,139,0.2)";
        const letterContent = revealed && isCorrect ? "✓" : revealed && isSel && !isCorrect ? "✗" : c.letter;
        return React.createElement("div", {
          key: c.letter, className: "quiz-choice",
          style: { background: bg, border, color, cursor: revealed ? "default" : "pointer" },
          onClick: () => !revealed && setSelected(c.letter)
        },
          React.createElement("span", { className: "letter", style: { background: letterBg } }, letterContent),
          React.createElement("span", { className: "text" }, c.text)
        );
      })
    ),
    React.createElement("div", { style: { display: "flex", gap: 10 } },
      !revealed
        ? React.createElement("button", {
            className: "reveal-btn " + (selected ? "active" : "disabled"),
            onClick: () => selected && setRevealed(true),
            disabled: !selected
          }, "Reveal Answer")
        : React.createElement("button", {
            className: "reset-btn",
            onClick: () => { setSelected(null); setRevealed(false); }
          }, "Try Again")
    ),
    revealed && question.explanation && React.createElement("div", {
      className: "explanation",
      style: {
        background: isCorrectSelection ? "rgba(34,197,94,0.08)" : "rgba(239,68,68,0.06)",
        border: isCorrectSelection ? "1px solid rgba(34,197,94,0.2)" : "1px solid rgba(239,68,68,0.15)"
      }
    },
      React.createElement("div", { className: "tag", style: { color: isCorrectSelection ? "#4ade80" : "#f87171" } },
        isCorrectSelection ? "✓ Correct!" : "✗ Incorrect — Answer: " + question.correctLetter
      ),
      React.createElement("p", null, question.explanation)
    )
  );
}

function MicroQuestions({ questions }) {
  const [revealed, setRevealed] = useState({});
  return React.createElement("div", { style: { marginTop: 20 } },
    React.createElement("div", { className: "micro-label" }, "⚡", " Quick Self-Check"),
    questions.map((q, i) =>
      React.createElement("div", {
        key: i, className: "micro-item",
        style: { background: revealed[i] ? "rgba(124,58,237,0.08)" : "rgba(30,41,59,0.5)" },
        onClick: () => setRevealed(r => ({...r, [i]: !r[i]}))
      },
        React.createElement("span", { className: "arrow" }, revealed[i] ? "▾" : "▸"),
        React.createElement("span", { className: "q" }, q)
      )
    )
  );
}

// ─── Section Panel ───────────────────────────────────────────────────────────
function SectionPanel({ section }) {
  if (section.key === "ABIM-Style Question") {
    const { questions, microQuestions } = parseQuizSection(section.content);
    return React.createElement(React.Fragment, null,
      questions.map((q, i) => React.createElement(QuizCard, { key: i, question: q, index: i })),
      microQuestions.length > 0 && React.createElement(MicroQuestions, { questions: microQuestions })
    );
  }
  return React.createElement(BulletContent, { text: section.content });
}

// ─── Main App ────────────────────────────────────────────────────────────────
function App() {
  const [topics] = useState(() => TOPICS_RAW.map(t => ({ ...t, sections: parseTopicMarkdown(t.markdown) })));
  const [selectedIdx, setSelectedIdx] = useState(null);
  const [activeSection, setActiveSection] = useState(0);
  const [sidebarOpen, setSidebarOpen] = useState(false);
  const [search, setSearch] = useState("");
  const contentRef = useRef(null);

  const topic = selectedIdx !== null ? topics[selectedIdx] : null;
  const section = topic?.sections?.[activeSection];

  const filtered = useMemo(() => {
    if (!search.trim()) return topics;
    const q = search.toLowerCase();
    return topics.filter(t => t.title.toLowerCase().includes(q) || t.markdown.toLowerCase().includes(q));
  }, [topics, search]);

  useEffect(() => {
    if (contentRef.current) contentRef.current.scrollTo({ top: 0, behavior: "smooth" });
  }, [activeSection, selectedIdx]);

  // ── Landing ────────────────────────────────────────────────────────────────
  if (selectedIdx === null) {
    return React.createElement("div", { className: "landing" },
      React.createElement("div", { className: "landing-bg" },
        React.createElement("div", { className: "orb1" }),
        React.createElement("div", { className: "orb2" })
      ),
      React.createElement("div", { className: "landing-inner" },
        React.createElement("div", { style: { textAlign: "center", marginBottom: 56 } },
          React.createElement("div", { className: "badge" }, React.createElement("span", null, "🌙"), " Night Float Companion"),
          React.createElement("h1", { className: "hero-title" }, "Your On-Call", React.createElement("br"), "Reference Guide"),
          React.createElement("p", { className: "hero-sub" }, "Evidence-based topic cards for overnight medicine. Panic cards, clinical pearls, orders, and board-style questions.")
        ),
        React.createElement("div", { className: "search-box" },
          React.createElement("span", { className: "search-icon" }, "🔍"),
          React.createElement("input", {
            className: "search-input", type: "text", value: search,
            onChange: e => setSearch(e.target.value), placeholder: "Search topics..."
          })
        ),
        React.createElement("div", { className: "topic-grid" },
          filtered.map((t, i) => {
            const realIdx = topics.indexOf(t);
            const accent = ACCENT_COLORS[realIdx % ACCENT_COLORS.length];
            return React.createElement("div", {
              key: t.id, className: "topic-card",
              onClick: () => { setSelectedIdx(realIdx); setActiveSection(0); setSidebarOpen(false); },
              onMouseEnter: e => { e.currentTarget.style.borderColor = accent + "44"; e.currentTarget.style.boxShadow = "0 8px 32px " + accent + "15"; },
              onMouseLeave: e => { e.currentTarget.style.borderColor = "rgba(148,163,184,0.1)"; e.currentTarget.style.boxShadow = "none"; e.currentTarget.style.transform = ""; }
            },
              React.createElement("div", { className: "accent-bar", style: { background: "linear-gradient(90deg, " + accent + ", transparent)" } }),
              React.createElement("div", { className: "card-icon", style: { background: accent + "18", border: "1px solid " + accent + "25" } }, TOPIC_ICONS[realIdx % TOPIC_ICONS.length]),
              React.createElement("h3", null, t.title),
              React.createElement("div", { className: "meta" },
                React.createElement("span", null, t.sections.length + " sections"),
                React.createElement("span", { style: { opacity: 0.4 } }, "•"),
                React.createElement("span", null, "Updated " + t.updated)
              )
            );
          })
        ),
        filtered.length === 0 && React.createElement("div", { style: { textAlign: "center", padding: "48px 0", color: "#475569" } }, "No topics match your search.")
      )
    );
  }

  // ── Detail View ────────────────────────────────────────────────────────────
  return React.createElement("div", { className: "detail-view" },
    React.createElement("div", { className: "top-bar" },
      React.createElement("button", { className: "back-btn", onClick: () => { setSelectedIdx(null); setSearch(""); } }, "← Topics"),
      React.createElement("h2", null, topic.title),
      React.createElement("button", { className: "mobile-toggle", onClick: () => setSidebarOpen(o => !o) }, "☰ Sections")
    ),
    React.createElement("div", { className: "body-wrap" },
      React.createElement("div", { className: "overlay " + (sidebarOpen ? "open" : ""), onClick: () => setSidebarOpen(false) }),
      React.createElement("div", { className: "sidebar " + (sidebarOpen ? "open" : "closed") },
        React.createElement("div", { className: "sidebar-label" }, "Sections"),
        topic.sections.map((sec, idx) => {
          const isActive = idx === activeSection;
          return React.createElement("button", {
            key: sec.key, className: "sidebar-btn" + (isActive ? " active" : ""),
            style: isActive ? { background: sec.color + "15" } : {},
            onClick: () => { setActiveSection(idx); setSidebarOpen(false); }
          },
            isActive && React.createElement("span", { className: "indicator", style: { background: sec.color } }),
            React.createElement("span", { style: { fontSize: 16, flexShrink: 0 } }, sec.icon),
            React.createElement("span", { style: { lineHeight: 1.3 } }, sec.label)
          );
        })
      ),
      React.createElement("div", { className: "main-content", ref: contentRef },
        React.createElement("div", { className: "main-inner" },
          section && React.createElement(React.Fragment, null,
            React.createElement("div", { className: "section-header" },
              React.createElement("div", { className: "row" },
                React.createElement("span", { className: "icon" }, section.icon),
                React.createElement("h2", null, section.label)
              ),
              React.createElement("div", { className: "bar", style: { background: "linear-gradient(90deg, " + section.color + "80, transparent)" } })
            ),
            React.createElement("div", { className: "content-area" },
              React.createElement(SectionPanel, { section })
            ),
            React.createElement("div", { className: "nav-footer" },
              activeSection > 0
                ? React.createElement("button", { className: "nav-btn", onClick: () => setActiveSection(i => i - 1) }, "← " + topic.sections[activeSection - 1].label)
                : React.createElement("div"),
              activeSection < topic.sections.length - 1
                ? React.createElement("button", { className: "nav-btn", onClick: () => setActiveSection(i => i + 1) }, topic.sections[activeSection + 1].label + " →")
                : React.createElement("div")
            )
          )
        )
      )
    )
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(React.createElement(App));
</script>
</body>
</html>
